<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="bbs">
	<!-- 게시글 조회 -->
	<select id="view" parameterType="String" resultMap="map1">
		select * from inven_bbs
		where b_idx = #{b_idx}
	</select>
	
	<resultMap type="project.vo.BbsVO" id="map1">
	<id property="b_idx" column="b_idx"/>
	<collection property="c_list" ofType="project.vo.CommVO" column="b_idx" select="com"/>
	</resultMap>
	
	<!-- 댓글 조회 -->
	<select id="com" resultType="project.vo.CommVO" parameterType="String">
		select * from inven_comment
		where b_idx = #{b_idx}
	</select>
	
	<!-- 조회수 증가 -->
	<update id="hit" parameterType="String">
		UPDATE inven_bbs
		SET hit = hit+1
		WHERE b_idx = #{b_idx}
	</update>
</mapper>
